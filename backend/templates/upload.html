<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css/upload.css') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='assets/favicon.ico') }}" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Tinos:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500;1,700&amp;display=swap"
        rel="stylesheet" />
    <title>Upload File</title>
</head>

<body>
    <div class="menu">
        <div class="modal fade">
            <div class="container-fluid px-4 px-lg-0">
                <div class="content">
                    <div class="upload_part">
                        <h2 style="color:red; font-size:24px; text-transform: uppercase;">Tải văn bản</h2>
                        <button class="upload_button" id="upload_button" type="submit" value="Upload">
                            <img class="image-upload" src="{{ url_for('static',filename='assets/img/upload.png') }}"
                                alt="upload file">
                        </button>
                        <div class="upload_hint" id="upload_hint">
                            Định dạng File: pdf, doc và docx.
                        </div>
                        <form action="/success" method="POST" enctype="multipart/form-data" id="form">
                            <input type="file" name="file" id="fileinput" style="display: none;" accept="file/*">
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    <script>
        $("#upload_button").click(function () {
            $("#fileinput").trigger("click");
        });

        $("#fileinput").change(function () {
            var fileName = $("#fileinput")[0].files[0].name;
            var fileExtension = fileName.split(".").pop().toLowerCase();

            if (fileExtension === "pdf" || fileExtension === "doc" || fileExtension === "docx") {
                $("#form").submit();
                $("#upload_hint").text("Đang tải file " + fileName + " lên server...").removeClass("error-message");

                // Hàm đợi upload server khoảng 5 giây
                setTimeout(function () {
                    $("#upload_hint").text("File " + fileName + " đã được tải lên thành công!");
                }, 5000);
            } else {
                $("#upload_hint").text("Định dạng file không hợp lệ. Vui lòng chọn file pdf, doc hoặc docx.").addClass("error-message");
                $("#fileinput").val(""); // Xóa trường chọn file
            }
        });
    </script>
</body>

</html>